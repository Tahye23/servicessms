<div
  class="backdrop-blur-xl bg-white/80 border border-white/30 shadow-2xl rounded-3xl p-6 sm:p-8 hover:shadow-2xl transition-all duration-300 hover:-translate-y-1 max-w-5xl mx-auto"
>
  <!-- Header selon le channel -->
  <header
    class="relative overflow-hidden bg-gradient-to-r from-indigo-600 via-purple-600 to-blue-600 rounded-3xl py-8 px-5 sm:px-10 shadow-2xl mb-6"
  >
    <div class="absolute inset-0 bg-black/20 rounded-3xl"></div>
    <div class="relative text-center z-10">
      <h2 class="text-2xl sm:text-4xl font-extrabold text-white mb-2 drop-shadow">
        Configuration
        <span class="bg-gradient-to-r from-yellow-300 to-orange-400 bg-clip-text text-transparent animate-gradient">
          {{ channel }} API
        </span>
      </h2>
      <p class="text-indigo-100 text-sm sm:text-lg drop-shadow">Configurez votre intégration {{ channel }} en quelques clics</p>
    </div>
  </header>

  <section *ngIf="channel === 'EMAIL'" class="mb-6">
    <div class="flex items-center gap-4 mb-4">
      <div class="w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg">
        <svg class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8m-18 8h18V8H3v8z" />
        </svg>
      </div>
      <h3 class="text-xl sm:text-2xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent">
        Guide de configuration Email
      </h3>
    </div>

    <div
      class="bg-gradient-to-r from-indigo-50 to-blue-50 border border-indigo-100 rounded-2xl p-4 sm:p-6 shadow-inner grid sm:grid-cols-2 gap-4"
    >
      <div class="flex items-center p-3 bg-white rounded-xl shadow-sm">
        <span class="w-6 h-6 bg-indigo-500 text-white rounded-full flex items-center justify-center text-xs font-bold mr-3">1</span>
        <span class="text-sm text-gray-700">Récupérez les paramètres SMTP de votre fournisseur email</span>
      </div>

      <div class="flex items-center p-3 bg-white rounded-xl shadow-sm">
        <span class="w-6 h-6 bg-indigo-500 text-white rounded-full flex items-center justify-center text-xs font-bold mr-3">2</span>
        <span class="text-sm text-gray-700">Configurez le Host et le Port (ex : smtp.gmail.com, 587)</span>
      </div>

      <div class="flex items-center p-3 bg-white rounded-xl shadow-sm">
        <span class="w-6 h-6 bg-indigo-500 text-white rounded-full flex items-center justify-center text-xs font-bold mr-3">3</span>
        <span class="text-sm text-gray-700">Saisissez l’adresse email et le mot de passe SMTP</span>
      </div>

      <div class="flex items-center p-3 bg-white rounded-xl shadow-sm">
        <span class="w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-xs font-bold mr-3">4</span>
        <span class="text-sm text-gray-700">Testez l’envoi d’email puis sauvegardez la configuration</span>
      </div>
    </div>
  </section>
  <!-- Guide SMS -->
  <section *ngIf="channel === 'SMS'" class="mb-6">
    <div class="flex items-center gap-4 mb-4">
      <div class="w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg">
        <svg class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
          />
        </svg>
      </div>
      <h3 class="text-xl sm:text-2xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent">
        Guide de configuration SMS
      </h3>
    </div>

    <div
      class="bg-gradient-to-r from-indigo-50 to-blue-50 border border-indigo-100 rounded-2xl p-4 sm:p-6 shadow-inner grid sm:grid-cols-2 gap-4"
    >
      <div class="flex items-center p-3 bg-white rounded-xl shadow-sm">
        <span class="w-6 h-6 bg-indigo-500 text-white rounded-full flex items-center justify-center text-xs font-bold mr-3">1</span>
        <span class="text-sm text-gray-700">Choisissez votre opérateur SMS (Mattel, Mauritel, Chinguitel…)</span>
      </div>

      <div class="flex items-center p-3 bg-white rounded-xl shadow-sm">
        <span class="w-6 h-6 bg-indigo-500 text-white rounded-full flex items-center justify-center text-xs font-bold mr-3">2</span>
        <span class="text-sm text-gray-700">Récupérez l’URL du serveur SMS (Host + Port)</span>
      </div>

      <div class="flex items-center p-3 bg-white rounded-xl shadow-sm">
        <span class="w-6 h-6 bg-indigo-500 text-white rounded-full flex items-center justify-center text-xs font-bold mr-3">3</span>
        <span class="text-sm text-gray-700">Générez vos identifiants (Username & Password)</span>
      </div>

      <div class="flex items-center p-3 bg-white rounded-xl shadow-sm">
        <span class="w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-xs font-bold mr-3">4</span>
        <span class="text-sm text-gray-700">Testez la connexion puis sauvegardez la configuration</span>
      </div>
    </div>
  </section>

  <!-- Formulaire -->
  <form [formGroup]="channel === 'SMS' ? smsForm : emailForm" class="space-y-6">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <div *ngIf="channel === 'SMS'" class="group">
        <label class="block text-sm font-semibold text-gray-700 mb-2">Opérateur</label>
        <select
          formControlName="smsOperator"
          class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 bg-white shadow-sm hover:shadow-md transition-all duration-200"
        >
          <option value="Mattel">Mattel</option>
          <option value="Mauritel">Mauritel</option>
          <option value="Chinguitel">Chinguitel</option>
        </select>
      </div>

      <div class="group">
        <label class="block text-sm font-semibold text-gray-700 mb-2">Host</label>
        <input
          formControlName="host"
          placeholder="Ex: smtp.example.com"
          class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 bg-white shadow-sm hover:shadow-md transition-all duration-200"
        />
      </div>

      <div class="group">
        <label class="block text-sm font-semibold text-gray-700 mb-2">Port</label>
        <input
          type="number"
          formControlName="port"
          placeholder="Ex: 587"
          class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 bg-white shadow-sm hover:shadow-md transition-all duration-200"
        />
      </div>

      <div class="group">
        <label class="block text-sm font-semibold text-gray-700 mb-2">Username</label>
        <input
          formControlName="username"
          placeholder="Nom d'utilisateur"
          class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 bg-white shadow-sm hover:shadow-md transition-all duration-200"
        />
      </div>

      <div class="group">
        <label class="block text-sm font-semibold text-gray-700 mb-2">Password</label>
        <input
          type="password"
          formControlName="password"
          placeholder="Mot de passe"
          class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 bg-white shadow-sm hover:shadow-md transition-all duration-200"
        />
      </div>
    </div>

    <!-- Boutons -->
    <div class="flex flex-col sm:flex-row gap-4 mt-4">
      <button
        type="button"
        (click)="saveCurrentTab()"
        class="flex-1 px-6 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-2xl font-semibold shadow-lg hover:scale-[1.02] hover:shadow-xl transition-all duration-300"
      >
        Sauvegarder
      </button>
      <button
        type="button"
        (click)="testCurrentTab()"
        class="flex-1 px-6 py-4 bg-gradient-to-r from-slate-50 to-slate-100 text-gray-700 rounded-2xl font-semibold shadow-lg hover:scale-[1.02] hover:shadow-xl transition-all duration-300"
      >
        Tester
      </button>
    </div>

    <div *ngIf="testResult" class="mt-4 text-gray-800 font-medium">{{ testResult }}</div>
  </form>
</div>
